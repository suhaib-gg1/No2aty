<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุงุทู - ูุฏุฑุณุฉ ุฑูุงุฏุฉ ุงูุชููุฒ</title>
   <link rel="stylesheet" href="css.css">
</head>
<body>
    <!-- ุดุฑูุท ุงูุชููู -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo-container">
                <img src="snapedit_1730146554309.png" alt="ุดุนุงุฑ ุงููุฏุฑุณุฉ" class="school-logo">
            </div>
            <div class="date-display" id="currentDate"></div>
            <div class="nav-links">
                <a href="#" class="nav-link" title="ุชุณุฌูู ุงูุฎุฑูุฌ" onclick="confirmLogout()">ุชุณุฌูู ุฎุฑูุฌ</a>        </div>
    </nav>

    <!-- ุงููุญุชูู ุงูุฑุฆูุณู -->
    <div class="container">
        <h1>ูุธุงู ุฅุฏุงุฑุฉ ููุงุท ุงูุทูุงุจ</h1>
        <img src="logo.png" alt="" style="height: 50px;">
        <div class="control-panel">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="ุงุจุญุซ ุนู ุทุงูุจ...">
                <select id="classFilter">
                    <option value="">ุฌููุน ุงููุตูู</option>
                    <option value="1/1">1/1</option>
                    <option value="1/1">1/1</option>
                    <option value="1/2">1/2</option>
                    <option value="1/3">1/3</option>
                    <option value="2/ุนุงู">2/ุนุงู</option>
                    <option value="2/ุตุญุฉ">2/ุตุญุฉ</option>
                    <option value="2/ููุฏุณุฉ">2/ููุฏุณุฉ</option>
                    <option value="3/ุนุงู">3/ุนุงู</option>
                    <option value="3/ุตุญุฉ">3/ุตุญุฉ</option>
                    <option value="3/ููุฏุณุฉ">3/ููุฏุณุฉ</option>
                </select>
            </div>
            <div class="action-buttons">
                <button class="action-btn add-btn" id="addStudentBtn">
                    <i>+</i> ุฅุถุงูุฉ ุทุงูุจ
                </button>
                <button class="action-btn import-btn" id="importStudentsBtn">
                    <i>โ</i> ุงุณุชูุฑุงุฏ ูู ุฅูุณู
                </button>
                <button class="action-btn export-btn" id="exportStudentsBtn">
                    <i>โ</i> ุชุตุฏูุฑ ูุฅูุณู
                </button>
                <button class="action-btn bulk-btn" id="bulkPointsBtn">
                    <i>ยฑ</i> ููุงุท ุฌูุงุนูุฉ
                </button>
                <button class="action-btn delete-selected-btn" id="deleteSelectedBtn">
                    <i>๐๏ธ</i> ุญุฐู ุงููุญุฏุฏ
                </button>
            </div>
        </div>
        
        <table id="studentsTable">
            <thead>
                <tr>
                    <th width="5%"><input type="checkbox" id="selectAllCheckbox"></th>
                    <th width="5%">ุงูุชุฑุชูุจ</th>
                    <th width="15%">ุงุณู ุงูุทุงูุจ</th>
                    <th width="15%">ุฅุฏุงุฑุฉ ุงูููุงุท</th> <!-- ุงูุนููุฏ ุงูุฌุฏูุฏ -->
                    <th width="5%">ุงููุตู</th>
                    <th width="20%">ุงูููุงุท</th>
                    <th width="5%">ุงูุฅุฌุฑุงุกุงุช</th> <!-- ุชุตุบูุฑ ุนุฑุถ ุนููุฏ ุงูุฅุฌุฑุงุกุงุช -->
                </tr>
            </thead>
            <tbody id="studentsList"></tbody>
        </table>
        
    <!-- ููุงูุฐ ููุจุซูุฉ -->
    <div id="studentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title" id="modalTitle">ุฅุถุงูุฉ ุทุงูุจ ุฌุฏูุฏ</span>
                <span class="close-btn" id="closeStudentModal">&times;</span>
            </div>
            <form id="studentForm">
                <input type="hidden" id="studentId">
                <div class="form-group">
                    <label for="modalName">ุงุณู ุงูุทุงูุจ:</label>
                    <input type="text" id="modalName" required>
                </div>
                <div class="form-group">
                    <label for="modalClass">ุงููุตู:</label>
                    <select id="modalClass" required>
                        <option value="1/1">1/1</option>
                        <option value="1/2">1/2</option>
                        <option value="1/3">1/3</option>
                        <option value="2/ุนุงู">2/ุนุงู</option>
                        <option value="2/ุตุญุฉ">2/ุตุญุฉ</option>
                        <option value="2/ููุฏุณุฉ">2/ููุฏุณุฉ</option>
                        <option value="3/ุนุงู">3/ุนุงู</option>
                        <option value="3/ุตุญุฉ">3/ุตุญุฉ</option>
                        <option value="3/ููุฏุณุฉ">3/ููุฏุณุฉ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="modalPoints">ุงูููุงุท:</label>
                    <input type="number" id="modalPoints" required>
                </div>
                <div class="form-group">
                    <label for="modalDate">ุชุงุฑูุฎ ุงูุชุนุฏูู:</label>
                    <input type="date" id="modalDate" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="modal-btn cancel-btn" id="cancelStudentBtn">ุฅูุบุงุก</button>
                    <button type="submit" class="modal-btn submit-btn" id="saveStudentBtn">ุญูุธ</button>
                </div>
            </form>
        </div>
    </div>

    <div id="importModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title">ุงุณุชูุฑุงุฏ ุจูุงูุงุช ูู ุฅูุณู</span>
                <span class="close-btn">&times;</span>
            </div>
            <form id="importForm">
                <div class="file-upload-area">
                    <div class="upload-icon">
                        <i>๐</i>
                    </div>
                    <div class="upload-instructions">
                        <p>ุงุณุญุจ ูุฃุณูุท ููู ุฅูุณู ููุง ุฃู</p>
                        <label for="excelFile" class="file-browse-btn">ุงุฎุชุฑ ููู</label>
                        <input type="file" id="excelFile" accept=".xlsx, .xls" required>
                    </div>
                    <div class="file-info" id="fileInfo">
                        <span id="fileName">ูู ูุชู ุงุฎุชูุงุฑ ููู</span>
                        <button type="button" id="clearFile" class="clear-file-btn">ร</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="importClass">ุชุนููู ุงููุตู:</label>
                    <select id="importClass" required>
                        <!-- ุฎูุงุฑุงุช ุงููุตูู ููุง -->
                        <option value="1/1">1/1</option>
                        <option value="1/2">1/2</option>
                        <option value="1/3">1/3</option>
                        <option value="2/ุนุงู">2/ุนุงู</option>
                        <option value="2/ุตุญุฉ">2/ุตุญุฉ</option>
                        <option value="2/ููุฏุณุฉ">2/ููุฏุณุฉ</option>
                        <option value="3/ุนุงู">3/ุนุงู</option>
                        <option value="3/ุตุญุฉ">3/ุตุญุฉ</option>
                        <option value="3/ููุฏุณุฉ">3/ููุฏุณุฉ</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="importMethod">ุทุฑููุฉ ุงูุงุณุชูุฑุงุฏ:</label>
                    <select id="importMethod">
                        <option value="append">ุฅุถุงูุฉ ุฅูู ุงูุจูุงูุงุช ุงูุญุงููุฉ</option>
                        <option value="replace">ุงุณุชุจุฏุงู ุฌููุน ุงูุจูุงูุงุช ุงูุญุงููุฉ</option>
                    </select>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="modal-btn cancel-btn">ุฅูุบุงุก</button>
                    <button type="submit" class="modal-btn submit-btn">ุงุณุชูุฑุงุฏ</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ุงูููุงุท ุงูุฌูุงุนูุฉ -->
    <div id="bulkPointsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title">ุฅุฏุงุฑุฉ ุงูููุงุท ุงูุฌูุงุนูุฉ</span>
                <span class="close-btn" id="closeBulkModal">&times;</span>
            </div>
            <form id="bulkPointsForm">
                <div class="form-group">
                    <label for="bulkPointsAmount">ุนุฏุฏ ุงูููุงุท:</label>
                    <input type="number" id="bulkPointsAmount" required>
                </div>
                <div class="form-group">
                    <label for="bulkOperationType">ููุน ุงูุนูููุฉ:</label>
                    <select id="bulkOperationType">
                        <option value="add">ุฅุถุงูุฉ ููุงุท</option>
                        <option value="subtract">ุฎุตู ููุงุท</option>
                    </select>
                </div>
                <!-- ูู ูุงูุฐุฉ ุงูููุงุท ุงูุฌูุงุนูุฉ -->
<div class="form-group">
    <label for="bulkDate">ุชุงุฑูุฎ ุงูุชุนุฏูู:</label>
    <input type="date" id="bulkDate" required>
</div>
                <div class="form-group">
                    <label for="bulkApplyTo">ุชุทุจูู ุนูู:</label>
                    <select id="bulkApplyTo">
                        <option value="all">ุฌููุน ุงูุทูุงุจ</option>
                        <option value="class">ูุตู ูุนูู</option>
                        <option value="selected">ุงูุทูุงุจ ุงููุญุฏุฏูู ููุท</option>

                    </select>
                </div>
                <div class="form-group" id="bulkClassSelection" style="display:none;">
                    <label for="bulkClass">ุงุฎุชูุงุฑ ุงููุตู:</label>
                    <select id="bulkClass">
                        <option value="1/1">1/1</option>
                        <option value="1/2">1/2</option>
                        <option value="1/3">1/3</option>
                        <option value="2/ุนุงู">2/ุนุงู</option>
                        <option value="2/ุตุญุฉ">2/ุตุญุฉ</option>
                        <option value="2/ููุฏุณุฉ">2/ููุฏุณุฉ</option>
                        <option value="3/ุนุงู">3/ุนุงู</option>
                        <option value="3/ุตุญุฉ">3/ุตุญุฉ</option>
                        <option value="3/ููุฏุณุฉ">3/ููุฏุณุฉ</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="modal-btn cancel-btn" id="cancelBulkBtn">ุฅูุบุงุก</button>
                    <button type="submit" class="modal-btn submit-btn" id="applyBulkBtn">ุชุทุจูู</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ุฑุณุงูุฉ ุชุฃููุฏ ุงูุญุฐู -->
    <div id="deleteConfirmation" class="confirmation-modal">
        <div class="confirmation-text" id="confirmationMessage"></div>
        <div class="confirmation-buttons">
            <button class="modal-btn cancel-btn" id="cancelDeleteBtn">ุฅูุบุงุก</button>
            <button class="modal-btn delete-btn" id="confirmDeleteBtn">ุชุฃููุฏ ุงูุญุฐู</button>
        </div>
    </div>

    <!-- ุฃุถู ูุงูุฐุฉ ุงูุชุงุฑูุฎ ุงูููุจุซูุฉ -->
    <div id="historyModal" class="modal">
        <div class="modal-content history-modal">
            <div class="modal-header">
                <span class="modal-title">ุณุฌู ุงูุชุนุฏููุงุช - <span id="historyStudentName"></span></span>
                <span class="close-btn" onclick="closeModal('historyModal')">&times;</span>
            </div>
            <div class="modal-body">
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>ุงูุชุงุฑูุฎ</th>
                            <th>ุงูููุงุท ุงูุณุงุจูุฉ</th>
                            <th>ุงูุชุบููุฑ</th>
                            <th>ุงูููุงุท ุงูุฌุฏูุฏุฉ</th>
                            <th>ุงูุณุจุจ</th>
                        </tr>
                    </thead>
                    <tbody id="historyList"></tbody>
                </table>
            </div>
        </div>
    </div>
   
    <!-- ุฃุถู ูุฐุง ูู ููุงูุฉ body -->
<div id="actionModal" class="modal">
    <div class="modal-content action-modal">
        <div class="modal-header">
            <span class="modal-title">ุงูุฅุฌุฑุงุกุงุช</span>
            <span class="close-btn" onclick="closeActionModal()">&times;</span>
        </div>
        <div class="modal-body">
            <button class="modal-action-btn edit-btn">โ๏ธ ุชุนุฏูู</button>
            <button class="modal-action-btn history-btn">๐ ุงูุชุงุฑูุฎ</button>
            <button class="modal-action-btn delete-btn">๐๏ธ ุญุฐู</button>
        </div>
    </div>
</div>
<button id="scrollToTopBtn" class="scroll-to-top" title="ุงูุนูุฏุฉ ุฅูู ุงูุฃุนูู">
    <i class="fas fa-arrow-up"></i> <!-- ุฃู ุงุณุชุฎุฏู ุฑูุฒ ุงูุณูู โฒ -->
</button>
<div id="exportOptionsModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">ุฎูุงุฑุงุช ุงูุชุตุฏูุฑ</h2>
            <span class="close-btn" onclick="closeModal('exportOptionsModal')">&times;</span>
        </div>

        <div class="modal-body">
            <div class="form-group">
                <label for="exportOption">ููุน ุงูุชุตุฏูุฑ:</label>
                <select id="exportOption" class="form-control" onchange="toggleExportClassSelection()">
                    <option value="all">ุชุตุฏูุฑ ุฌููุน ุงูุทูุงุจ</option>
                    <option value="class">ุชุตุฏูุฑ ูุตู ูุนูู</option>
                </select>
            </div>

            <div id="exportClassSelection" class="form-group" style="display: none;">
                <label for="exportClassSelect">ุงุฎุชุฑ ุงููุตู:</label>
                <select id="exportClassSelect" class="form-control">
                    <option value="1/1">1/1</option>
                    <option value="1/2">1/2</option>
                    <option value="1/3">1/3</option>
                    <option value="2/ุนุงู">2/ุนุงู</option>
                    <option value="2/ุตุญุฉ">2/ุตุญุฉ</option>
                    <option value="2/ููุฏุณุฉ">2/ููุฏุณุฉ</option>
                    <option value="3/ุนุงู">3/ุนุงู</option>
                    <option value="3/ุตุญุฉ">3/ุตุญุฉ</option>
                    <option value="3/ููุฏุณุฉ">3/ููุฏุณุฉ</option>
                </select>
            </div>
        </div>

        <div class="modal-footer">
            <button onclick="closeModal('exportOptionsModal')" class="modal-btn cancel-btn">ุฅูุบุงุก</button>
            <button onclick="handleExport()" class="modal-btn submit-btn">ุชุฃููุฏ ุงูุชุตุฏูุฑ</button>
        </div>
    </div>
</div>




<!-- ูุงูุฐุฉ ุงูุชุฃููุฏ ุงููุฎุตุตุฉ -->
<div id="logoutConfirmation" class="confirmation-modal">
    <div class="confirmation-content">
        <p>ูู ุฃูุช ูุชุฃูุฏ ูู ุฑุบุจุชู ูู ุชุณุฌูู ุงูุฎุฑูุฌุ</p>
        <div class="confirmation-buttons">
            <button onclick="performLogout()" class="confirm-btn">ูุนู</button>
            <button onclick="closeLogoutModal()" class="cancel-btn">ูุง</button>
        </div>
    </div>
</div>

<!-- ุฃููุงุท CSS -->
<style>
.confirmation-modal {
    display: none;
    position: fixed;
    top: 50%;
    left: 50;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: 1000;
}

.confirmation-content {
    background: white;
    width: 300px;
    padding: 20px;
    border-radius: 8px;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
}

.confirmation-buttons {
    margin-top: 20px;
    display: flex;
    gap: 10px;
    justify-content: center;
}

.confirm-btn, .cancel-btn {
    padding: 8px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

.confirm-btn {
    background: #4CAF50;
    color: white;
}

.cancel-btn {
    background: #f44336;
    color: white;
}
</style>

<!-- ุงูุณูุฑูุจุช -->
<script>
function confirmLogout() {
    document.getElementById('logoutConfirmation').style.display = 'block';
}

function closeLogoutModal() {
    document.getElementById('logoutConfirmation').style.display = 'none';
}

function performLogout() {
    // ููููู ุฅุถุงูุฉ ุฃู ุนูููุงุช ุชูุธูู ููุง ูุจู ุงูุชูุฌูู
    window.location.href = "index.html";
}
</script>




<!-- ุญููู ุงูููููุฉ -->
<footer class="luxury-footer">
<p>ุฌููุน ุงูุญููู ูุญููุธุฉ ยฉ 2025 ุตููุจ ูุญูุฏ ุจูุฒูุฏุงู</p>
  <p>ููููุน ุฅุนุงุฏุฉ ูุดุฑ ุฃู ุชูุฒูุน ุฃู ุฌุฒุก ูู ูุฐุง ุงูุนูู ุฏูู ุฅุฐู ูุชุงุจู ูุณุจู.</p>
  <p>ููุชูุงุตู: <a href="mailto:suhaibwebdev@gmail.com">suhaibwepdev@gmail.com</a></p>
</footer>
<script src="/socket.io/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script src="js.js"></script>
<script>
    const socket = io();

    // ุงุณุชูุจุงู ุงูุจูุงูุงุช ุงูุฃูููุฉ ุนูุฏ ุงูุงุชุตุงู
    socket.on("initialData", (data) => {
        console.log("ุชู ุงุณุชูุจุงู ุงูุจูุงูุงุช ุงูุฃูููุฉ:", data);
        students = data.students;
        displayStudents();
    });

    // ุงุณุชูุจุงู ุงูุชุญุฏูุซุงุช ูู ุงูุฎุงุฏู
    socket.on("dataUpdated", (newData) => {
        console.log("ุชู ุงุณุชูุจุงู ุชุญุฏูุซ ุฌุฏูุฏ:", newData);
        students = newData.students;
        displayStudents();
    });

    // ุฏุงูุฉ ุฅุฑุณุงู ุงูุชุญุฏูุซุงุช ููุฎุงุฏู
    function saveChangesToServer(updatedStudents) {
        socket.emit("updateFromAdmin", {
            students: updatedStudents
        });
    }

    // ุชููุฆุฉ ุงูุตูุญุฉ ุนูุฏ ุงูุชุญููู
    document.addEventListener('DOMContentLoaded', function() {
        init();
        updateDate();
    });
</script>
<!-- admin.html -->
<form id="updateForm">
    <input type="text" id="dataInput" placeholder="Enter new data" />
    <button type="submit">Update</button>
  </form>
  
  <script>
    document.getElementById('updateForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const newData = { data: document.getElementById('dataInput').value };
      fetch('/update', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(newData)
      })
      .then(response => response.json())
      .then(result => {
        if (result.status === 'success') {
          alert('Data updated successfully!');
        }
      });
    });
  </script>
  
</body>
</html>
