<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ù‚Ø§Ø·ÙŠ - Ù…Ø¯Ø±Ø³Ø© Ø±ÙŠØ§Ø¯Ø© Ø§Ù„ØªÙ…ÙŠØ²</title>
    <!-- Ø¥Ø¶Ø§ÙØ© Ø³ÙƒØ±ÙŠØ¨Øª ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ù‚Ø¨Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
    <script>
        // ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¬Ù„Ø³Ø© Ù…Ø³ØªØ®Ø¯Ù… ØµØ§Ù„Ø­Ø©
        const userType = localStorage.getItem('user_type');
        if (!userType || userType !== 'admin') {
            window.location.replace('index.html');
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø­ÙÙˆØ¸ Ù‚Ø¨Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
        (function() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
        })();
    </script>
    <link rel="stylesheet" href="css.css">
    <link rel="icon" href="n.icon">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <img src="snapedit_1730146554309.png" class="school-logo" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¯Ø±Ø³Ø©">
            <div class="date-display" id="currentDate"></div>
            <div class="nav-links">
                <!-- Hamburger Menu Button -->
                <button class="hamburger-btn" onclick="toggleMenu()">
                    â˜°
                </button>

                <!-- Mobile Menu -->
                <div class="mobile-menu">
                    <button class="theme-toggle" onclick="toggleTheme()" title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ">
                        <i>ğŸŒ™</i> ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹
                    </button>
                    <a href="#" class="nav-link" title="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬" onclick="confirmLogout()">
                        <span class="logout-icon">ğŸšª</span> ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Ù‡ÙŠÙƒÙ„ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª -->
    <div class="tabs-container">
        <div class="tab active" onclick="activateTab('Ù†Ù‚Ø§Ø·ÙŠ')">Ù†Ù‚Ø§Ø·ÙŠ</div>
        <div class="tab" onclick="activateTab('Ø§Ù†Ø§ Ù…ØªÙ…ÙŠØ²')">Ø§Ù†Ø§ Ù…ØªÙ…ÙŠØ²</div>
    </div>

    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù†Ù‚Ø§Ø·ÙŠ -->
    <div id="nqati-content">
        <div class="container">
            <h1>Ù†Ù‚Ø§Ø·ÙŠ</h1>
            <img src="logo.png" alt="" style="height: 50px;">
            <div class="control-panel">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø·Ø§Ù„Ø¨...">
                    <select id="stageFilter" onchange="updateClassFilter()">
                        <option value="primary">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ©</option>
                        <option value="middle">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù…ØªÙˆØ³Ø·Ø©</option>
                        <option value="secondary">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ©</option>
                    </select>
                    <select id="classFilter">
                        <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØµÙˆÙ„</option>
                    </select>
                </div>
                <div class="action-buttons">
                    <button class="action-btn add-btn" id="addStudentBtn">
                        <i>+</i> Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨
                    </button>
                    <button class="action-btn import-btn" id="importStudentsBtn">
                        <i>â†‘</i> Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù† Ø¥ÙƒØ³Ù„
                    </button>
                    <button class="action-btn export-btn" id="exportStudentsBtn">
                        <i>â†“</i> ØªØµØ¯ÙŠØ± Ù„Ø¥ÙƒØ³Ù„
                    </button>
                    <button class="action-btn bulk-btn" id="bulkPointsBtn">
                        <i>Â±</i> Ù†Ù‚Ø§Ø· Ø¬Ù…Ø§Ø¹ÙŠØ©
                    </button>
                    <button class="action-btn delete-selected-btn" id="deleteSelectedBtn">
                        <i>ğŸ—‘ï¸</i> Ø­Ø°Ù Ø§Ù„Ù…Ø­Ø¯Ø¯
                    </button>
                </div>
            </div>
            
            <table id="studentsTable">
                <thead>
                    <tr>
                        <th width="5%"><input type="checkbox" id="selectAllCheckbox" class="select-checkbox"></th>
                        <th width="5%">Ø§Ù„ØªØ±ØªÙŠØ¨</th>
                        <th width="15%">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                        <th width="15%">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ù‚Ø§Ø·</th> <!-- Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯ -->
                        <th width="5%">Ø§Ù„ÙØµÙ„</th>
                        <th width="20">Ø§Ù„Ù†Ù‚Ø§Ø·</th>
                        <th width="5%">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th> <!-- ØªØµØºÙŠØ± Ø¹Ø±Ø¶ Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª -->
                    </tr>
                </thead>
                <tbody id="studentsList"></tbody>
            </table>
        </div>
    </div>

    <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù†Ø§ Ù…ØªÙ…ÙŠØ² (Ù…Ø®ÙÙŠ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹) -->
    <div id="mutamayez-content" style="display: none;">
        <div class="container">
            <h1>Ø§Ù†Ø§ Ù…ØªÙ…ÙŠØ²</h1>
            <img src="logo.png" alt="" style="height: 50px; display: none;">
            <div class="control-panel">
                <div class="search-box">
                    <input type="text" id="mutamayez-searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø·Ø§Ù„Ø¨...">
                    <select id="mutamayez-stageFilter" onchange="updateMutamayezClassFilter()">
                        <option value="primary">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ©</option>
                        <option value="middle">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù…ØªÙˆØ³Ø·Ø©</option>
                        <option value="secondary">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ©</option>
                    </select>
                    <select id="mutamayez-classFilter">
                        <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØµÙˆÙ„</option>
                    </select>
                </div>
                <div class="action-buttons">
                    <button class="action-btn add-btn" id="mutamayez-addStudentBtn">
                        <i>+</i> Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨
                    </button>
                    <button class="action-btn import-btn" id="mutamayez-importStudentsBtn">
                        <i>â†‘</i> Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù† Ø¥ÙƒØ³Ù„
                    </button>
                    <button class="action-btn export-btn" id="mutamayez-exportStudentsBtn">
                        <i>â†“</i> ØªØµØ¯ÙŠØ± Ù„Ø¥ÙƒØ³Ù„
                    </button>
                    <button class="action-btn bulk-btn" id="mutamayez-bulkPointsBtn">
                        <i>Â±</i> Ù†Ù‚Ø§Ø· Ø¬Ù…Ø§Ø¹ÙŠØ©
                    </button>
                    <button class="action-btn delete-selected-btn" id="mutamayez-deleteSelectedBtn">
                        <i>ğŸ—‘ï¸</i> Ø­Ø°Ù Ø§Ù„Ù…Ø­Ø¯Ø¯
                    </button>
                </div>
            </div>
            
            <table id="mutamayez-studentsTable">
                <thead>
                    <tr>
                        <th width="5%"><input type="checkbox" id="mutamayez-selectAllCheckbox" class="select-checkbox"></th>
                        <th width="5%">Ø§Ù„ØªØ±ØªÙŠØ¨</th>
                        <th width="15%">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                        <th width="15%">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ù‚Ø§Ø·</th>
                        <th width="5%">Ø§Ù„ÙØµÙ„</th>
                        <th width="20">Ø§Ù„Ù†Ù‚Ø§Ø·</th>
                        <th width="5%">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                    </tr>
                </thead>
                <tbody id="mutamayez-studentsList"></tbody>
            </table>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ© Ø±Ù…Ø² Ø¬Ø¯ÙŠØ¯ -->
    <div id="addCodeModal" class="modal-overlay" style="display: none;">
        <div class="confirmation-modal">
            <div class="confirmation-content">
                <div class="modal-header">
                    <span class="modal-title">Ø¥Ø¶Ø§ÙØ© Ø±Ù…Ø² Ø¯Ø®ÙˆÙ„ Ø¬Ø¯ÙŠØ¯</span>
                    <button class="close-btn" onclick="closeModal('addCodeModal')">&times;</button>
                </div>
                <form id="addCodeForm">
                    <div class="form-group">
                        <label for="codeValue">Ø§Ù„Ø±Ù…Ø²:</label>
                        <input type="text" id="codeValue" required>
                    </div>
                    <div class="form-group">
                        <label for="codeType">Ù†ÙˆØ¹ Ø§Ù„Ø±Ù…Ø²:</label>
                        <select id="codeType" required>
                            <option value="student">Ø·Ø§Ù„Ø¨</option>
                            <option value="admin">Ù…Ø´Ø±Ù</option>
                            <option value="custom">Ù…Ø®ØµØµ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="modal-btn submit-btn">Ø¥Ø¶Ø§ÙØ©</button>
                        <button type="button" class="modal-btn cancel-btn" onclick="closeModal('addCodeModal')">Ø¥Ù„ØºØ§Ø¡</button>
                    </div>
                </form>
                <div id="addCodeMsg" class="error-msg" style="display:none;"></div>
            </div>
        </div>
    </div>
    <!-- Ù†ÙˆØ§ÙØ° Ù…Ù†Ø¨Ø«Ù‚Ø© -->
    <div id="studentModal" class="modal-overlay">
        <div class="confirmation-modal">
            <div class="confirmation-content">
                <div class="modal-header">
                    <span class="modal-title" id="modalTitle">Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</span>
                    <button class="close-btn" onclick="closeModal('studentModal')">&times;</button>
                </div>
                <form id="studentForm">
                    <input type="hidden" id="studentId">
                    <div class="form-group">
                        <label for="modalName">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨:</label>
                        <input type="text" id="modalName" required>
                    </div>
                    <div class="form-group">
                        <label for="modalStage">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©:</label>
                        <select id="modalStage" required onchange="updateModalClassFilter()">
                            <option value="primary">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ©</option>
                            <option value="middle">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù…ØªÙˆØ³Ø·Ø©</option>
                            <option value="secondary">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ©</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="modalClass">Ø§Ù„ÙØµÙ„:</label>
                        <select id="modalClass" required>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="modalPoints">Ø§Ù„Ù†Ù‚Ø§Ø·:</label>
                        <input type="number" id="modalPoints" required>
                    </div>
                    <div class="form-group">
                        <label for="modalDate">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ¹Ø¯ÙŠÙ„:</label>
                        <input type="date" id="modalDate" required>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="modal-btn cancel-btn" onclick="closeModal('studentModal')">Ø¥Ù„ØºØ§Ø¡</button>
                        <button type="submit" class="modal-btn submit-btn" id="saveStudentBtn">Ø­ÙØ¸</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="importModal" class="modal-overlay">
        <div class="confirmation-modal">
            <div class="confirmation-content">
                <div class="modal-header">
                    <span class="modal-title">Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø¥ÙƒØ³Ù„</span>
                    <button class="close-btn" onclick="closeModal('importModal')">&times;</button>
                </div>
                <form id="importForm">
                    <div class="file-upload-area">
                        <div class="upload-icon">
                            <i>ğŸ“</i>
                        </div>
                        <div class="upload-instructions">
                            <p>Ø§Ø³Ø­Ø¨ ÙˆØ£Ø³Ù‚Ø· Ù…Ù„Ù Ø¥ÙƒØ³Ù„ Ù‡Ù†Ø§ Ø£Ùˆ</p>
                            <label for="excelFile" class="file-browse-btn">Ø§Ø®ØªØ± Ù…Ù„Ù</label>
                            <input type="file" id="excelFile" accept=".xlsx, .xls" required onchange="updateFileName(this)">
                        </div>
                        <div class="file-info" id="fileInfo">
                            <span id="fileName">Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù</span>
                            <button type="button" id="clearFile" class="clear-file-btn" onclick="clearFileSelection()" style="display: none;">Ã—</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="importStage">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©:</label>
                        <select id="importStage" required onchange="updateImportClassFilter()">
                            <option value="primary">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ©</option>
                            <option value="middle">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù…ØªÙˆØ³Ø·Ø©</option>
                            <option value="secondary">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ©</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="importClass">Ø§Ù„ÙØµÙ„:</label>
                        <select id="importClass" required>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="importMethod">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯:</label>
                        <select id="importMethod">
                            <option value="append">Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</option>
                            <option value="replace">Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</option>
                            <option value="fullBackupReplace">Ø§Ø³ØªØ¨Ø¯Ø§Ù„ ÙƒØ§Ù…Ù„ Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ)</option>
                        </select>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="modal-btn cancel-btn" onclick="closeModal('importModal')">Ø¥Ù„ØºØ§Ø¡</button>
                        <button type="submit" class="modal-btn submit-btn">Ø§Ø³ØªÙŠØ±Ø§Ø¯</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ© -->
    <div id="bulkPointsModal" class="modal-overlay">
        <div class="confirmation-modal">
            <div class="confirmation-content">
                <div class="modal-header">
                    <span class="modal-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ©</span>
                    <button class="close-btn" onclick="closeModal('bulkPointsModal')">&times;</button>
                </div>
                <form id="bulkPointsForm">
                    <div class="form-group">
                        <label for="bulkPointsAmount">Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø·:</label>
                        <input type="number" id="bulkPointsAmount" required>
                    </div>
                    <div class="form-group">
                        <label for="bulkOperationType">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:</label>
                        <select id="bulkOperationType">
                            <option value="add">Ø¥Ø¶Ø§ÙØ© Ù†Ù‚Ø§Ø·</option>
                            <option value="subtract">Ø®ØµÙ… Ù†Ù‚Ø§Ø·</option>
                        </select>
                    </div>
                    <!-- Ø£Ø¶Ù ÙÙ„ØªØ± Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ù‡Ù†Ø§ -->
                    <div class="form-group" id="bulkStageSelection">
                        <label for="bulkStage">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©:</label>
                        <select id="bulkStage" class="form-control" onchange="updateBulkClassFilter()">
                            <option value="primary">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ©</option>
                            <option value="middle">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù…ØªÙˆØ³Ø·Ø©</option>
                            <option value="secondary">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ©</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="bulkDate">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ¹Ø¯ÙŠÙ„:</label>
                        <input type="date" id="bulkDate" required>
                    </div>
                    <div class="form-group">
                        <label for="bulkApplyTo">ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰:</label>
                        <select id="bulkApplyTo">
                            <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨</option>
                            <option value="class">ÙØµÙ„ Ù…Ø¹ÙŠÙ†</option>
                            <option value="selected">Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø­Ø¯Ø¯ÙŠÙ† ÙÙ‚Ø·</option>

                        </select>
                    </div>
                    <div class="form-group" id="bulkClassSelection" style="display:none;">
                        <label for="bulkClass">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØµÙ„:</label>
                        <select id="bulkClass">
                            <option value="1/1">1/1</option>
                            <option value="1/2">1/2</option>
                            <option value="1/3">1/3</option>
                            <option value="2/Ø¹Ø§Ù…">2/Ø¹Ø§Ù…</option>
                            <option value="2/ØµØ­Ø©">2/ØµØ­Ø©</option>
                            <option value="2/Ù‡Ù†Ø¯Ø³Ø©">2/Ù‡Ù†Ø¯Ø³Ø©</option>
                            <option value="3/Ø¹Ø§Ù…">3/Ø¹Ø§Ù…</option>
                            <option value="3/ØµØ­Ø©">3/ØµØ­Ø©</option>
                            <option value="3/Ù‡Ù†Ø¯Ø³Ø©">3/Ù‡Ù†Ø¯Ø³Ø©</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="modal-btn cancel-btn" onclick="closeModal('bulkPointsModal')">Ø¥Ù„ØºØ§Ø¡</button>
                        <button type="submit" class="modal-btn submit-btn" id="applyBulkBtn">ØªØ·Ø¨ÙŠÙ‚</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù -->
    <div id="deleteConfirmation" class="modal-overlay">
        <div class="confirmation-modal">
            <div class="confirmation-content">
                <div class="confirmation-icon">âš ï¸</div>
                <h3>ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù</h3>
                <p>Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø±ØºØ¨ØªÙƒ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø­Ø¯Ø¯ÙŠÙ†ØŸ</p>
                <p class="warning-text">Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ†ÙÙŠØ°</p>
                <div class="confirmation-buttons">
                    <button onclick="closeModal('deleteConfirmation')" class="cancel-btn">Ø¥Ù„ØºØ§Ø¡</button>
                    <button onclick="confirmDelete()" class="confirm-btn">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ø£Ø¶Ù Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© -->
    <div id="historyModal" class="modal">
        <div class="modal-content history-modal">
            <div class="modal-header">
                <span class="modal-title">Ø³Ø¬Ù„ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª - <span id="historyStudentName"></span></span>
                <span class="close-btn" onclick="closeModal('historyModal')">&times;</span>
            </div>
            <div class="modal-body">
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                            <th>Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</th>
                            <th>Ø§Ù„ØªØºÙŠÙŠØ±</th>
                            <th>Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</th>
                            <th>Ø§Ù„Ø³Ø¨Ø¨</th>
                        </tr>
                    </thead>
                    <tbody id="historyList"></tbody>
                </table>
            </div>
        </div>
    </div>
   
    <!-- Ø£Ø¶Ù Ù‡Ø°Ø§ ÙÙŠ Ù†Ù‡Ø§ÙŠØ© body -->
<div id="actionModal" class="modal-overlay">
    <div class="confirmation-modal">
        <div class="confirmation-content">
            <div class="modal-header">
                <span class="modal-title">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</span>
                <button class="close-btn" onclick="closeModal('actionModal')">&times;</button>
            </div>
            <div class="modal-body">
                <button class="modal-action-btn edit-btn" onclick="handleActionButton('edit')">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>
                <button class="modal-action-btn history-btn" onclick="handleActionButton('history')">ğŸ•’ Ø§Ù„ØªØ§Ø±ÙŠØ®</button>
                <button class="modal-action-btn delete-btn" onclick="handleActionButton('delete')">ğŸ—‘ï¸ Ø­Ø°Ù</button>
            </div>
        </div>
    </div>
</div>
<button id="scrollToTopBtn" class="scroll-to-top" title="Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¹Ù„Ù‰">
    <i class="fas fa-arrow-up"></i> <!-- Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Ø±Ù…Ø² Ø§Ù„Ø³Ù‡Ù… â–² -->
</button>
<!-- ØªØ¹Ø¯ÙŠÙ„ Ù†Ø§ÙØ°Ø© Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªØµØ¯ÙŠØ± -->
<div id="exportOptionsModal" class="modal-overlay">
    <div class="confirmation-modal">
        <div class="confirmation-content">
            <div class="modal-header">
                <span class="modal-title">Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªØµØ¯ÙŠØ±</span>
                <button class="close-btn" onclick="closeModal('exportOptionsModal')">&times;</button>
            </div>
            <form id="exportForm">
                <div class="form-group">
                    <label for="exportOption">Ù†ÙˆØ¹ Ø§Ù„ØªØµØ¯ÙŠØ±:</label>
                    <select id="exportOption" class="form-control" onchange="toggleExportOptions()">
                        <option value="stage">ØªØµØ¯ÙŠØ± Ù…Ø±Ø­Ù„Ø© Ù…Ø¹ÙŠÙ†Ø©</option>
                        <option value="class">ØªØµØ¯ÙŠØ± ÙØµÙ„ Ù…Ø¹ÙŠÙ†</option>
                        <option value="top10SingleStage">ØªØµØ¯ÙŠØ± Ø§Ù„Ø¹Ø´Ø±Ø© Ø§Ù„Ø£ÙˆØ§Ø¦Ù„ Ù„Ù…Ø±Ø­Ù„Ø© Ù…Ø¹ÙŠÙ†Ø©</option>
                        <option value="fullBackup">Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ ÙƒØ§Ù…Ù„</option>
                    </select>
                </div>

                <div id="exportStageSelection" class="form-group" style="display: none;">
                    <label for="exportStageSelect">Ø§Ù„Ù…Ø±Ø­Ù„Ø©:</label>
                    <select id="exportStageSelect" class="form-control" onchange="updateExportClassFilter()">
                        <option value="primary">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ©</option>
                        <option value="middle">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù…ØªÙˆØ³Ø·Ø©</option>
                        <option value="secondary">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ©</option>
                    </select>
                </div>

                <div id="exportClassSelection" class="form-group" style="display: none;">
                    <label for="exportClassSelect">Ø§Ø®ØªØ± Ø§Ù„ÙØµÙ„:</label>
                    <select id="exportClassSelect" class="form-control">
                        <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØµÙ„</option>
                    </select>
                </div>

                <div class="form-actions">
                    <button type="button" class="modal-btn cancel-btn" onclick="closeModal('exportOptionsModal')">Ø¥Ù„ØºØ§Ø¡</button>
                    <button type="button" class="modal-btn submit-btn" onclick="handleExport()">ØªØµØ¯ÙŠØ±</button>
                </div>
            </form>
        </div>
    </div>
</div>




<!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø®ØµØµØ© -->
<div id="logoutConfirmation" class="modal-overlay">
    <div class="confirmation-modal">
        <div class="confirmation-content">
            <p>Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø±ØºØ¨ØªÙƒ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ</p>
            <div class="confirmation-buttons">
                <button onclick="performLogout()" class="confirm-btn">Ù†Ø¹Ù…</button>
                <button onclick="closeModal('logoutConfirmation')" class="cancel-btn">Ù„Ø§</button>
            </div>
        </div>
    </div>
</div>

<!-- Ø£Ù†Ù…Ø§Ø· CSS -->
<style>
/* Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹Ø±ÙŠÙ ÙƒØ§Ù…Ù„ Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù†ÙˆØ§ÙØ° */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(3px);
    z-index: 1000;
    display: none;
    justify-content: center;
    align-items: center;
}

.modal-overlay.active {
    display: flex;
}

.confirmation-modal {
    position: relative;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #0000008a;   
   
}

.confirmation-content {
    background: rgb(251, 249, 249);
    width: 400px;
    max-width: 90%;
    padding: 25px;
    border-radius: 12px;
    text-align: center;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    position: relative;
    animation: modalSlideIn 0.3s ease;
}

@keyframes modalSlideIn {
    from {
        opacity: 0;
        transform: translateY(-30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ¬Ø§ÙˆØ¨ Ù…Ø¹ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
@media (max-width: 480px) {
    .confirmation-content {
        width: 95%;
        margin: 10px;
        padding: 20px;
    }
}

.confirmation-icon {
    font-size: 48px;
    margin-bottom: 20px;
    animation: iconShake 0.5s ease;
}

.confirmation-content h3 {
    color: #e74c3c;
    font-size: 24px;
    margin: 0 0 15px 0;
    font-weight: bold;
}

.confirmation-content p {
    color: #2c3e50;
    font-size: 16px;
    margin: 0 0 10px 0;
    line-height: 1.5;
}

.warning-text {
    color: #e74c3c;
    font-size: 14px;
    font-style: italic;
    margin: 15px 0 25px 0;
    padding: 10px;
    background: #fff5f5;
    border-radius: 8px;
    border: 1px solid #ffe0e0;
}

.confirmation-buttons {
    display: flex;
    gap: 15px;
    justify-content: center;
}

.confirmation-buttons button {
    padding: 12px 25px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 15px;
    font-weight: bold;
    transition: all 0.3s ease;
    min-width: 120px;
}

.confirm-btn {
    background: #e74c3c;
    color: white;
}

.confirm-btn:hover {
    background: #c0392b;
    transform: translateY(-2px);
}

.cancel-btn {
    background: #f1f1f1;
    color: #666;
}

.cancel-btn:hover {
    background: #e0e0e0;
    transform: translateY(-2px);
}

@keyframes iconShake {
    0%, 100% { transform: rotate(0); }
    25% { transform: rotate(-10deg); }
    75% { transform: rotate(10deg); }
}

.file-info {
    margin-top: 10px;
    padding: 8px;
    background: #f5f5f5;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

#fileName {
    font-size: 14px;
    color: #333;
    word-break: break-all;
}

.clear-file-btn {
    background: none;
    border: none;
    color: #666;
    font-size: 18px;
    cursor: pointer;
    padding: 0 5px;
}

.clear-file-btn:hover {
    color: #f44336;
}

.file-browse-btn {
    display: inline-block;
    padding: 8px 16px;
    background: #4CAF50;
    color: white;
    border-radius: 4px;
    cursor: pointer;
    margin: 5px 0;
}

.file-browse-btn:hover {
    background: #45a049;
}

/* ØªØ­Ø¯ÙŠØ« Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
.close-btn {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: #666;
    padding: 5px 10px;
    transition: color 0.3s ease;
}

.close-btn:hover {
    color: #e74c3c;
}

.modal-action-btn {
    display: block;
    width: 100%;
    padding: 12px;
    margin: 8px 0;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.3s ease;
}

.modal-action-btn.edit-btn {
    background: #3498db;
    color: white;
}

.modal-action-btn.history-btn {
    background: #2ecc71;
    color: white;
}

.modal-action-btn.delete-btn {
    background: #e74c3c;
    color: white;
}

.modal-action-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}

/* ØªØ­Ø¯ÙŠØ« Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ */
.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: bold;
    color: #333;
}

.form-control {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 14px;
    transition: border-color 0.3s ease;
}

.form-control:focus {
    border-color: #3498db;
    outline: none;
    box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
}

.form-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 20px;
}

.modal-btn {
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    font-weight: bold;
    transition: all 0.3s ease;
}

.modal-btn.cancel-btn {
    background: #f1f1f1;
    color: #666;
}

.modal-btn.submit-btn {
    background: #3498db;
    color: white;
}

.modal-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.modal-btn.cancel-btn:hover {
    background: #e0e0e0;
}

.modal-btn.submit-btn:hover {
    background: #2980b9;
}



.nav-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 1200px;
    margin: 0 auto;
    position: relative;
    padding: 0 20px;
}

.logo-container {
    display: flex;
    align-items: center;
    flex: 1;
}

.nav-links {
    display: flex;
    align-items: center;
    flex: 1;
    justify-content: flex-end;
}


/* ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ¬Ø§ÙˆØ¨ Ù…Ø¹ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
@media (max-width: 768px) {
    .nav-container {
        padding: 0 10px;
    }
    
    .date-display {
        font-size: 0.9em;
        padding: 4px 10px;
        white-space: nowrap;
    }
    
    .school-logo {
        height: 30px;
    }
    
    .nav-link {
        padding: 6px 12px;
        font-size: 0.9em;
    }
}

/* Ø£Ù†Ù…Ø§Ø· Ø§Ù„ØªØ´Ùƒ Ø¨ÙˆÙƒØ³ Ø§Ù„Ù…Ø®ØµØµØ© */
.select-checkbox {
    appearance: none;
    -webkit-appearance: none;
    width: 20px;
    height: 20px;
    border: 2px solid #4CAF50;
    border-radius: 4px;
    background-color: white;
    cursor: pointer;
    position: relative;
    transition: all 0.3s ease;
}

.select-checkbox:checked {
    background-color: #4CAF50;
    border-color: #4CAF50;
}

.select-checkbox:checked::after {
    content: 'âœ“';
    position: absolute;
    color: white;
    font-size: 14px;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

.select-checkbox:hover {
    border-color: #45a049;
    box-shadow: 0 0 5px rgba(76, 175, 80, 0.3);
}

/* Ø£Ù†Ù…Ø§Ø· Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ Ù„Ù„ØªØ´Ùƒ Ø¨ÙˆÙƒØ³ */
[data-theme="dark"] .select-checkbox {
    background-color: #2c2c2c;
    border-color: #eb55ff;
}

[data-theme="dark"] .select-checkbox:checked {
    background-color: #cc4ddd;
    border-color: #d24be4;
}

[data-theme="dark"] .select-checkbox:hover {
    border-color: #d24be4;
    box-shadow: 0 0 5px rgba(76, 175, 80, 0.5);
}
</style>

<!-- Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª -->
<script>
function openModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.classList.add('active');
        modal.style.display = 'flex';
    }
}

function closeModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.classList.remove('active');
        modal.style.display = 'none';
        if (modalId === 'actionModal') {
            currentStudentId = null;
        }
    }
}

function confirmLogout() {
    openModal('logoutConfirmation');
}

function closeLogoutModal() {
    closeModal('logoutConfirmation');
}

function performLogout() {
    // Ø­Ø°Ù Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ù„Ø³Ø©
    localStorage.removeItem('user_type');
    window.location.href = "index.html";
}

function updateFileName(input) {
    const fileNameElement = document.getElementById('fileName');
    const clearButton = document.getElementById('clearFile');
    
    if (input.files && input.files[0]) {
        fileNameElement.textContent = input.files[0].name;
        clearButton.style.display = 'inline-block';
    } else {
        fileNameElement.textContent = 'Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù';
        clearButton.style.display = 'none';
    }
}

function clearFileSelection() {
    const fileInput = document.getElementById('excelFile');
    const fileNameElement = document.getElementById('fileName');
    const clearButton = document.getElementById('clearFile');
    
    fileInput.value = '';
    fileNameElement.textContent = 'Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù';
    clearButton.style.display = 'none';
}

function deleteSelectedStudents() {
    if (selectedStudents.size === 0) {
        showAlert('Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ø¯ÙŠØ¯ Ø·Ø§Ù„Ø¨ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„', 'warning');
        return;
    }
    openModal('deleteConfirmation');
}

function confirmDelete() {
    students = students.filter(function(student) {
        return !selectedStudents.has(student.id);
    });
    
    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ù„Ù„Ø®Ø§Ø¯Ù…
    saveChangesToServer(students);
    
    selectedStudents.clear();
    closeModal('deleteConfirmation');
    displayStudents();
    showAlert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø­Ø¯Ø¯ÙŠÙ† Ø¨Ù†Ø¬Ø§Ø­', 'success');
}

// Ø¥Ø¶Ø§ÙØ© Ø¯Ø§Ù„Ø© Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª
function handleActionButton(action) {
    if (!currentStudentId) return;
    
    switch(action) {
        case 'edit':
            editStudent(currentStudentId);
            closeModal('actionModal');
            break;
        case 'history':
            showHistory(currentStudentId);
            closeModal('actionModal');
            break;
        case 'delete':
            deleteSingleStudent(currentStudentId);
            closeModal('actionModal');
            break;
    }
}

// ØªØ­Ø¯ÙŠØ« Ø¯Ø§Ù„Ø© ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª
function openActionModal() {
    if (!currentStudentId) return;
    openModal('actionModal');
}

// Ø¯Ø§Ù„Ø© Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨ Ù…Ù† Ø¥ÙƒØ³Ù„
// ØªÙ… Ù†Ù‚Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© Ø¥Ù„Ù‰ js.js Ù„ØªØ¬Ù†Ø¨ Ø§Ù„ØªØ¹Ø§Ø±Ø¶
// function handleImport(e) { ... }
</script>




<!-- Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ© -->
<footer class="luxury-footer">
<p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2025 ØµÙ‡ÙŠØ¨ Ù…Ø­Ù…Ø¯ Ø¨ÙˆØ²ÙŠØ¯Ø§Ù†</p>
  <p>ÙŠÙÙ…Ù†Ø¹ Ø¥Ø¹Ø§Ø¯Ø© Ù†Ø´Ø± Ø£Ùˆ ØªÙˆØ²ÙŠØ¹ Ø£ÙŠ Ø¬Ø²Ø¡ Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…Ù„ Ø¯ÙˆÙ† Ø¥Ø°Ù† ÙƒØªØ§Ø¨ÙŠ Ù…Ø³Ø¨Ù‚.</p>
  <p>Ù„Ù„ØªÙˆØ§ØµÙ„: <a href="mailto:suhaibwebdev@gmail.com">suhaibwebdev@gmail.com</a></p>
</footer>
<script src="/socket.io/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="js.js"></script>
<script>
// Ø²Ø± ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ© Ø±Ù…Ø²
const addCodeBtn = document.getElementById('addCodeBtn');
if (addCodeBtn) {
    addCodeBtn.addEventListener('click', function() {
        document.getElementById('addCodeModal').style.display = 'block';
    });
}

// Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¥Ø¶Ø§ÙØ© Ø±Ù…Ø² Ø¬Ø¯ÙŠØ¯
const addCodeForm = document.getElementById('addCodeForm');
if (addCodeForm) {
    addCodeForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        const codeValue = document.getElementById('codeValue').value.trim();
        const codeType = document.getElementById('codeType').value;
        const msg = document.getElementById('addCodeMsg');
        msg.style.display = 'none';
        if (!codeValue) {
            msg.textContent = 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² ØµØ§Ù„Ø­';
            msg.style.display = 'block';
            return;
        }
        try {
            const res = await fetch('/add-code', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ code: codeValue, type: codeType })
            });
            const result = await res.json();
            if (result.success) {
                msg.textContent = 'ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ù…Ø² Ø¨Ù†Ø¬Ø§Ø­';
                msg.style.color = '#4CAF50';
                msg.style.display = 'block';
                addCodeForm.reset();
            } else {
                msg.textContent = result.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø¶Ø§ÙØ©';
                msg.style.color = '#f44336';
                msg.style.display = 'block';
            }
        } catch (err) {
            msg.textContent = 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…';
            msg.style.color = '#f44336';
            msg.style.display = 'block';
        }
    });
}
</script>
<script>
    const socket = io();

    // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„
    socket.on("initialData", (data) => {
        console.log("ØªÙ… Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ©:", data);
        students = data.students;
        displayStudents();
    });

    // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…
    socket.on("dataUpdated", (newData) => {
        console.log("ØªÙ… Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙŠØ¯:", newData);
        students = newData.students;
        displayStudents();
    });

    // Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ù„Ù„Ø®Ø§Ø¯Ù…
    function saveChangesToServer(updatedStudents) {
        socket.emit("updateFromAdmin", {
            students: updatedStudents
        });
    }

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
    document.addEventListener('DOMContentLoaded', function() {
        console.log('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„');
        init();
    });
</script>

  
  <script>
    document.getElementById('updateForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const newData = { data: document.getElementById('dataInput').value };
      fetch('/update', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(newData)
      })
      .then(response => response.json())
      .then(result => {
        if (result.status === 'success') {
          alert('Data updated successfully!');
        }
      });
    });
  </script>
  <script>
    function displayCurrentDate() {
        const dateElement = document.getElementById("currentDate");
        const today = new Date();
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        const arabicDate = today.toLocaleDateString('ar-EG', options);
        dateElement.textContent = arabicDate;
    }

    // Ø¹Ø±Ø¶ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    window.addEventListener('DOMContentLoaded', displayCurrentDate);
</script>

<script>
// Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙØµÙˆÙ„ ÙÙŠ Ù†Ø§ÙØ°Ø© Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ©
window.addEventListener('DOMContentLoaded', function() {
    var bulkApplyTo = document.getElementById('bulkApplyTo');
    var bulkClassSelection = document.getElementById('bulkClassSelection');
    if (bulkApplyTo && bulkClassSelection) {
        function toggleBulkClassSelection() {
            bulkClassSelection.style.display = bulkApplyTo.value === 'class' ? 'block' : 'none';
        }
        bulkApplyTo.addEventListener('change', toggleBulkClassSelection);
        // Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ©
        toggleBulkClassSelection();
    }
});
</script>

    

</body>
</html>

<script>
// Ø¯Ø§Ù„Ø© ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
function toggleTheme() {
    const body = document.documentElement;
    const currentTheme = body.getAttribute('data-theme');
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    
    body.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
    
    // ØªØ­Ø¯ÙŠØ« Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø²Ø±
    const themeIcon = document.querySelector('.theme-toggle i');
    themeIcon.textContent = newTheme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
}

// ØªØ­Ø¯ÙŠØ« Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø²Ø± Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
document.addEventListener('DOMContentLoaded', () => {
    const savedTheme = localStorage.getItem('theme') || 'light';
    const themeIcon = document.querySelector('.theme-toggle i');
    themeIcon.textContent = savedTheme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
});
</script>

<script>
// Ø¯Ø§Ù„Ø© ØªØ¨Ø¯ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‡Ø§Ù…Ø¨Ø±ØºØ±
function toggleMenu() {
    const mobileMenu = document.querySelector('.mobile-menu');
    mobileMenu.classList.toggle('active');
}

// Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
document.addEventListener('click', (event) => {
    const mobileMenu = document.querySelector('.mobile-menu');
    const hamburgerBtn = document.querySelector('.hamburger-btn');
    if (!mobileMenu.contains(event.target) && !hamburgerBtn.contains(event.target) && mobileMenu.classList.contains('active')) {
        mobileMenu.classList.remove('active');
    }
});

// Existing logout functions (ensure they are present or add them if missing)
function openModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.classList.add('active');
        modal.style.display = 'flex';
    }
}

function closeModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.classList.remove('active');
        modal.style.display = 'none';
        if (modalId === 'actionModal') {
            currentStudentId = null;
        }
    }
}

function confirmLogout() {
    openModal('logoutConfirmation');
}

// Assuming performLogout already exists and is correct
// function performLogout() { ... }
    
// Assuming toggleTheme already exists and is correct
// function toggleTheme() { ... }
// Assuming the DOMContentLoaded listener for theme exists
// document.addEventListener('DOMContentLoaded', () => { ... });
</script>
