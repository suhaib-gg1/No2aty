<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
<script>
  // ุชุญูู ูู ูุฌูุฏ ุฌูุณุฉ ูุณุชุฎุฏู ุตุงูุญุฉ
  const userType = localStorage.getItem('user_type');
  if (!userType || userType !== 'student') {
    window.location.replace('index.html');
  }
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุชุฑุชูุจ ุงูุทูุงุจ - ูุฏุฑุณุฉ ุฑูุงุฏุฉ ุงูุชููุฒ</title>
    <link rel="stylesheet" href="css.css">
        <link rel="icon" href="n.icon">

</head>

<body class="student-view">
    <nav class="navbar">
        <div class="nav-container">
            <img src="snapedit_1730146554309.png" class="school-logo" alt="ุดุนุงุฑ ุงููุฏุฑุณุฉ">
            <div class="date-display" id="currentDate"></div>
            <div class="nav-links">
                <!-- Hamburger Menu Button -->
                <button class="hamburger-btn" onclick="toggleMenu()">
                    โฐ
                </button>

                <!-- Mobile Menu -->
                <div class="mobile-menu">
                    <button class="theme-toggle" onclick="toggleTheme()" title="ุชุจุฏูู ุงููุถุน ุงููููู">
                        <i>๐</i> ุชุจุฏูู ุงููุถุน
                    </button>
                    <a href="#" class="nav-link" title="ุชุณุฌูู ุงูุฎุฑูุฌ" onclick="confirmLogout()">
                        <span class="logout-icon">๐ช</span> ุชุณุฌูู ุฎุฑูุฌ
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- ูููู ุงูุชุจููุจุงุช -->
    <div class="tabs-container">
        <div class="tab active" onclick="activateTabStudent('ููุงุทู')">ููุงุทู</div>
        <div class="tab" onclick="activateTabStudent('ุงูุง ูุชููุฒ')">ุงูุง ูุชููุฒ</div>
    </div>

    <!-- ุงููุญุชูู ุงูุฑุฆูุณู ูููุงุทู -->
    <div id="nqati-content-student">
        <div class="container">
            <h1>ุชุฑุชูุจ ุงูุทูุงุจ ุญุณุจ ุงูููุงุท</h1>
            <img src="logo.png" alt="ููุงุทู" style="height: 50px;">
            <div class="control-panel">
                <div class="search-box">
                    <input type="text" id="studentSearch" placeholder="ุงุจุญุซ ุนู ุทุงูุจ...">
                    <select id="studentStageFilter" onchange="updateStudentClassFilter()">
                        <option value="primary">ุงููุฑุญูุฉ ุงูุงุจุชุฏุงุฆูุฉ</option>
                        <option value="middle">ุงููุฑุญูุฉ ุงููุชูุณุทุฉ</option>
                        <option value="secondary">ุงููุฑุญูุฉ ุงูุซุงูููุฉ</option>
                    </select>
                    <select id="studentClassFilter">
                        <option value="">ุฌููุน ุงููุตูู</option>
                    </select>
                </div>
            </div>

            <table id="studentsTable">
                <thead>
                    <tr>
                        <th width="15%">ุงูุชุฑุชูุจ</th>
                        <th width="35%">ุงุณู ุงูุทุงูุจ</th>
                        <th width="25%">ุงููุตู</th>
                        <th width="25%">ุงูููุงุท</th>
                    </tr>
                </thead>
                <tbody id="studentsList"></tbody>
            </table>
        </div>
    </div>

    <!-- ูุญุชูู ุงูุง ูุชููุฒ (ูุฎูู ุงูุชุฑุงุถูุงู) -->
    <div id="mutamayez-content-student" style="display: none;">
        <div class="container">
             <h1>ุตูุญุฉ ุงูุง ูุชููุฒ</h1>
             <img src="logo.png" alt="ุงูุง ูุชููุฒ" style="height: 50px; display: none;"> <!-- ุฅุฎูุงุก ุดุนุงุฑ ููุงุทู -->
             <div class="control-panel">
                 <div class="search-box">
                    <input type="text" id="mutamayez-studentSearch" placeholder="ุงุจุญุซ ุนู ุทุงูุจ...">
                     <select id="mutamayez-studentStageFilter">
                         <option value="primary">ุงููุฑุญูุฉ ุงูุงุจุชุฏุงุฆูุฉ</option>
                         <option value="middle">ุงููุฑุญูุฉ ุงููุชูุณุทุฉ</option>
                         <option value="secondary">ุงููุฑุญูุฉ ุงูุซุงูููุฉ</option>
                     </select>
                     <select id="mutamayez-studentClassFilter">
                         <option value="">ุฌููุน ุงููุตูู</option>
                     </select>
                 </div>
             </div>
             
             <table id="mutamayez-studentsTable-student">
                 <thead>
                     <tr>
                         <th width="15%">ุงูุชุฑุชูุจ</th>
                         <th width="35%">ุงุณู ุงูุทุงูุจ</th>
                         <th width="25%">ุงููุตู</th>
                         <th width="25%">ุงูููุงุท</th>
                     </tr>
                 </thead>
                 <tbody id="mutamayez-studentsList-student"></tbody>
             </table>
        </div>
    </div>

    <footer class="luxury-footer">
        <p>ุฌููุน ุงูุญููู ูุญููุธุฉ ยฉ 2025 ุตููุจ ูุญูุฏ ุจูุฒูุฏุงู</p>
        <p>ููููุน ุฅุนุงุฏุฉ ูุดุฑ ุฃู ุชูุฒูุน ุฃู ุฌุฒุก ูู ูุฐุง ุงูุนูู ุฏูู ุฅุฐู ูุชุงุจู ูุณุจู.</p>
        <p>ููุชูุงุตู: <a href="mailto:suhaibwebdev@gmail.com">suhaibwebdev@gmail.com</a></p>
    </footer>

    <div id="logoutConfirmation" class="confirmation-modal">
        <div class="confirmation-content">
            <p>ูู ุฃูุช ูุชุฃูุฏ ูู ุฑุบุจุชู ูู ุชุณุฌูู ุงูุฎุฑูุฌุ</p>
            <div class="confirmation-buttons">
                <button onclick="performLogout()" class="confirm-btn">ูุนู</button>
                <button onclick="closeLogoutModal()" class="cancel-btn">ูุง</button>
            </div>
        </div>
    </div>

    <style>
    .confirmation-modal {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 1000;
    }
    .confirmation-content {
        background: white;
        width: 300px;
        padding: 20px;
        border-radius: 8px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
    }
    .confirmation-buttons {
        margin-top: 20px;
        display: flex;
        gap: 10px;
        justify-content: center;
    }
    .confirm-btn, .cancel-btn {
        padding: 8px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
    .confirm-btn { background: #4CAF50; color: white; }
    .cancel-btn { background: #f44336; color: white; }
    </style>

    <script>
    function confirmLogout() {
        document.getElementById('logoutConfirmation').style.display = 'block';
    }
    function closeLogoutModal() {
        document.getElementById('logoutConfirmation').style.display = 'none';
    }
    function performLogout() {
        // ุญุฐู ุจูุงูุงุช ุงูุฌูุณุฉ
        localStorage.removeItem('user_type');
        window.location.href = "index.html";
    }
    </script>

    <script>
        let students = [];
        let activeTab = 'ููุงุทู'; // ุฅุถุงูุฉ ูุชุบูุฑ ูุชุชุจุน ุงูุชุจููุจ ุงููุดุท
        // ุชุนุฑูู ุงููุตูู ููู ูุฑุญูุฉ
        const stageClasses = {
            primary: {
                name: 'ุงููุฑุญูุฉ ุงูุงุจุชุฏุงุฆูุฉ',
                classes: ['1/1', '1/2', '2/1', '2/2', '3/1', '3/2', '4/1', '4/2', '5/1', '5/2', '6/1', '6/2']
            },
            middle: {
                name: 'ุงููุฑุญูุฉ ุงููุชูุณุทุฉ',
                classes: ['1/1', '1/2', '2/1', '2/2', '3/1', '3/2']
            },
            secondary: {
                name: 'ุงููุฑุญูุฉ ุงูุซุงูููุฉ',
                classes: ['1/1', '1/2', '1/3', '2/ุนุงู', '2/ุตุญุฉ', '2/ููุฏุณุฉ', 'ุซุงูุซ ุนุงู/1', 'ุซุงูุซ ุนุงู/2', 'ุซุงูุซ ุนุงู/3', 'ุซุงูุซ ุตุญุฉ/1', 'ุซุงูุซ ุตุญุฉ/2', 'ุซุงูุซ ููุฏุณุฉ/1', 'ุซุงูุซ ููุฏุณุฉ/2']
            }
        };

        // ุฏุงูุฉ ุชุญุฏูุซ ูุงุฆูุฉ ุงููุตูู ุญุณุจ ุงููุฑุญูุฉ ุงููุฎุชุงุฑุฉ
        function updateStudentClassFilter() {
            const stageFilter = document.getElementById('studentStageFilter');
            const classFilter = document.getElementById('studentClassFilter');
            const selectedStage = stageFilter.value;
            
            // ูุณุญ ุงููุงุฆูุฉ ุงูุญุงููุฉ
            classFilter.innerHTML = '<option value="">ุฌููุน ุงููุตูู</option>';
            
            if (selectedStage && stageClasses[selectedStage]) {
                stageClasses[selectedStage].classes.forEach(className => {
                    const option = document.createElement('option');
                    option.value = className;
                    option.textContent = className;
                    classFilter.appendChild(option);
                });
            }
            
            // ุชุญุฏูุซ ุนุฑุถ ุงูุทูุงุจ
            updateDisplay();
        }

        // ุฏุงูุฉ ุญุณุงุจ ุงูุชุฑุชูุจ (ูุนุฏูุฉ ูุชูุจู ูุงุฆูุฉ ุงูุทูุงุจ ููุนุงูู)
        function calculateRanks(studentsToRank) {
            const stageFilter = document.getElementById('studentStageFilter').value;
            const classFilter = document.getElementById('studentClassFilter').value;

            // ุงูุชุฑุชูุจ ุญุณุจ ุงููุฑุญูุฉ (ุฏุงุฎู ุงููุงุฆูุฉ ุงูุชู ุชู ุชูุฑูุฑูุง)
            const stageSorted = [...studentsToRank].sort((a, b) => {
                if (b.points !== a.points) return b.points - a.points;
                return a.id - b.id;
            });
            stageSorted.forEach((student, index) => {
                student.stageRank = index + 1; // ุงูุชุฑุชูุจ ุฏุงุฎู ุงููุฑุญูุฉ ุงููููุชุฑุฉ ุญุงููุงู
            });

            // ุญุณุงุจ ุงูุชุฑุชูุจ ููู ูุตู ูู ุงููุฌููุนุฉ ุงููููุชุฑุฉ (ุงูุชู ุชู ุชูุฑูุฑูุง)
            const stageInfo = stageClasses[stageFilter]; // ูุณุชุฎุฏู ููุชุฑ ุงููุฑุญูุฉ ุงููุญุฏุฏ ููุนุซูุฑ ุนูู ุงููุตูู
            if (stageInfo) {
                stageInfo.classes.forEach(className => {
                    const classStudents = studentsToRank
                        .filter(s => s.class === className) // ุชุตููุฉ ุญุณุจ ุงููุตู ุฏุงุฎู ุงููุงุฆูุฉ ุงูููุฑุฑุฉ
                        .sort((a, b) => {
                            if (b.points !== a.points) return b.points - a.points;
                            return a.id - b.id;
                        });
                    classStudents.forEach((student, index) => {
                        student.classRank = index + 1; // ุงูุชุฑุชูุจ ุฏุงุฎู ุงููุตู ุงููุญุฏุฏ
                    });
                });
            }
        }

        function filterAndSort() {
            const searchTerm = document.getElementById('studentSearch').value.toLowerCase();
            const stageFilter = document.getElementById('studentStageFilter').value;
            const classFilter = document.getElementById('studentClassFilter').value;

            console.log('Filtering students for', activeTab, ':', students.length, 'total students');

            // ุชุตููุฉ ุงูุทูุงุจ ุญุณุจ ุงูุชุจููุจ ุงููุดุท ุฃููุงู (ููุงุทู)
            let result = students.filter(student => student.category === activeTab);
            
            // ุชุทุจูู ููุชุฑ ุงููุฑุญูุฉ ุฅุฐุง ุชู ุชุญุฏูุฏู
            if (stageFilter) {
                result = result.filter(student => student.stage === stageFilter);
            }
            
            if (classFilter) {
                result = result.filter(s => s.class === classFilter);
            }
            if (searchTerm) {
                result = result.filter(s => s.name.toLowerCase().includes(searchTerm));
            }
            // ูุง ูููู ุจุงููุฑุฒ ุฃู ุญุณุงุจ ุงูุชุฑุชูุจ ููุง ุจุนุฏ ุงูุขูุ ุณูุชู ุฐูู ูู updateDisplay ู calculateRanks
            return result;
        }

        function updateDisplay() {
            console.log('ุชุญุฏูุซ ุนุฑุถ ุทูุงุจ ููุงุทู...');
            const classFilter = document.getElementById('studentClassFilter').value;
            // ุงูุญุตูู ุนูู ูุงุฆูุฉ ุงูุทูุงุจ ุงููููุชุฑุฉ ููุนุฑุถ
            const filteredStudentsToDisplay = filterAndSort();
            
            // ุญุณุงุจ ุงูุชุฑุชูุจ ุจูุงุกู ุนูู ุงููุงุฆูุฉ ุงููููุชุฑุฉ ููุนุฑุถ
            calculateRanks(filteredStudentsToDisplay); // ุชูุฑูุฑ ุงููุงุฆูุฉ ุงููููุชุฑุฉ

            const tbody = document.getElementById('studentsList');
            tbody.innerHTML = '';

            filteredStudentsToDisplay.forEach(student => {
                // ุงุณุชุฎุฏุงู ุงูุชุฑุชูุจ ุงููุญุณูุจ (stageRank ุฃู classRank) ุจูุงุกู ุนูู ููุชุฑ ุงููุตู
                const rank = classFilter ? student.classRank : student.stageRank;
                
                // ุฅูุดุงุก ุงูุตู ุฃููุงู
                const row = document.createElement('tr');

                // ุฅุถุงูุฉ ุงูููุฏุงููุงุช ููุทูุงุจ ุงูุซูุงุซุฉ ุงูุฃูุงุฆู ููุฆุงุช ุงูุชูุณูู
                let rankDisplay = rank;
                if (rank === 1) { 
                    rankDisplay = '๐ฅ ' + rank; 
                    row.classList.add('rank-1'); // ุฅุถุงูุฉ ููุงุณ rank-1
                } 
                else if (rank === 2) { 
                    rankDisplay = '๐ฅ ' + rank; 
                    row.classList.add('rank-2'); // ุฅุถุงูุฉ ููุงุณ rank-2
                } 
                else if (rank === 3) { 
                    rankDisplay = '๐ฅ ' + rank; 
                    row.classList.add('rank-3'); // ุฅุถุงูุฉ ููุงุณ rank-3
                }

                 if (rank >= 1 && rank <= 10) { 
                    row.classList.add('top-10-row'); // ุฅุถุงูุฉ ููุงุณ top-10-row
                }

                row.innerHTML = `
                    <td>${rankDisplay}</td>
                    <td>${student.name}</td>
                    <td>${student.class}</td>
                    <td>${student.points}</td>
                `;

                tbody.appendChild(row);
            });
        }

        function updateDate() {
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('currentDate').textContent = new Date().toLocaleDateString('ar-EG', options);
        }

        // ุฅุถุงูุฉ ูุณุชูุนู ุงูุฃุญุฏุงุซ
        document.getElementById('studentSearch').addEventListener('input', updateDisplay);
        document.getElementById('studentClassFilter').addEventListener('change', updateDisplay);
        document.getElementById('studentStageFilter').addEventListener('change', updateStudentClassFilter);

        // ุชุนููู ุงููุฑุญูุฉ ุงูุงูุชุฑุงุถูุฉ ุนูุฏ ุชุญููู ุงูุตูุญุฉ
        window.addEventListener('load', () => {
            updateDate();
            document.getElementById('studentStageFilter').value = 'primary';
            updateStudentClassFilter();
        });
    </script>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();

        socket.on("dataUpdated", (newData) => {
            console.log("ุชู ุงุณุชูุจุงู ุชุญุฏูุซ ุฌุฏูุฏ:", newData);
            students = newData.students;
            const nqatiStudentsCount = students.filter(s => s.category === 'ููุงุทู').length;
            console.log('Received', students.length, 'total students,', nqatiStudentsCount, 'in ููุงุทู category');
            if (activeTab === 'ููุงุทู') {
                updateDisplay();
            } else if (activeTab === 'ุงูุง ูุชููุฒ') {
                updateMutamayezDisplay();
            }
        });

        // ุงุณุชูุจุงู ุงูุจูุงูุงุช ุงูุฃูููุฉ ุนูุฏ ุงูุงุชุตุงู
        socket.on("initialData", (data) => {
            console.log("ุชู ุงุณุชูุจุงู ุงูุจูุงูุงุช ุงูุฃูููุฉ:", data);
            students = data.students;
            const nqatiStudentsCount = students.filter(s => s.category === 'ููุงุทู').length;
            console.log('Received', students.length, 'total students,', nqatiStudentsCount, 'in ููุงุทู category');
            if (activeTab === 'ููุงุทู') {
                updateDisplay();
            } else if (activeTab === 'ุงูุง ูุชููุฒ') {
                updateMutamayezDisplay();
            }
        });

        // ุฏุงูุฉ ุชุญุฏูุซ ุนุฑุถ ุงูุทูุงุจ ูู ุชุจููุจ ุงูุง ูุชููุฒ
        function updateMutamayezDisplay() {
            const searchTerm = document.getElementById('mutamayez-studentSearch').value.toLowerCase();
            const stageFilter = document.getElementById('mutamayez-studentStageFilter').value;
            const classFilter = document.getElementById('mutamayez-studentClassFilter').value;

            // ุชุตููุฉ ุงูุทูุงุจ ุญุณุจ ุงููุฆุฉ (ุงูุง ูุชููุฒ)
            let filteredStudents = students.filter(student => student.category === 'ุงูุง ูุชููุฒ');
            
            // ุชุทุจูู ุงูููุงุชุฑ
            if (stageFilter) {
                filteredStudents = filteredStudents.filter(student => student.stage === stageFilter);
            }
            if (classFilter) {
                filteredStudents = filteredStudents.filter(student => student.class === classFilter);
            }
            if (searchTerm) {
                filteredStudents = filteredStudents.filter(student => student.name.toLowerCase().includes(searchTerm));
            }

            // ุชุฑุชูุจ ุงูุทูุงุจ ุญุณุจ ุงูููุงุท
            filteredStudents.sort((a, b) => b.points - a.points || a.id - b.id);

            // ุญุณุงุจ ุงูุชุฑุชูุจ
            filteredStudents.forEach((student, index) => {
                student.displayRank = index + 1;
            });

            // ุนุฑุถ ุงูุทูุงุจ ูู ุงูุฌุฏูู
            const tbody = document.getElementById('mutamayez-studentsList-student');
            tbody.innerHTML = '';

            filteredStudents.forEach(student => {
                const row = document.createElement('tr');
                const rank = student.displayRank;
                
                // ุฅุถุงูุฉ ุงูููุฏุงููุงุช ููุทูุงุจ ุงูุซูุงุซุฉ ุงูุฃูุงุฆู
                let rankDisplay = rank;
                if (rank === 1) {
                    rankDisplay = '๐ฅ ' + rank;
                    row.classList.add('rank-1');
                } else if (rank === 2) {
                    rankDisplay = '๐ฅ ' + rank;
                    row.classList.add('rank-2');
                } else if (rank === 3) {
                    rankDisplay = '๐ฅ ' + rank;
                    row.classList.add('rank-3');
                }

                row.innerHTML = `
                    <td>${rankDisplay}</td>
                    <td>${student.name}</td>
                    <td>${student.class}</td>
                    <td>${student.points}</td>
                `;

                if (rank >= 1 && rank <= 10) {
                    row.classList.add('top-10-row');
                }

                tbody.appendChild(row);
            });
        }

        // ุชุญุฏูุซ ุฏุงูุฉ setupMutamayezStudentEventListeners
        function setupMutamayezStudentEventListeners() {
            console.log('ุฅุนุฏุงุฏ ูุณุชูุนู ุงูุฃุญุฏุงุซ ูุฃุฒุฑุงุฑ ุงูุง ูุชููุฒ (ุทุงูุจ)...');
            const mutamayezContent = document.getElementById('mutamayez-content-student');
            if (!mutamayezContent) return;

            const searchInput = mutamayezContent.querySelector('#mutamayez-studentSearch');
            const stageFilter = mutamayezContent.querySelector('#mutamayez-studentStageFilter');
            const classFilter = mutamayezContent.querySelector('#mutamayez-studentClassFilter');

            // ุชุฌูุจ ุฅุถุงูุฉ ุงููุณุชูุนูู ุฃูุซุฑ ูู ูุฑุฉ
            if (mutamayezContent.dataset.listenersAttached === 'true') {
                console.log('ูุณุชูุนู ุฃุญุฏุงุซ ุงูุง ูุชููุฒ (ุทุงูุจ) ููุฌูุฏูู ุจุงููุนู.');
                return;
            }
            
            // ุฅุถุงูุฉ ูุณุชูุนู ุงูุฃุญุฏุงุซ ููููุชุฑุฉ ูุงูุจุญุซ
            if (searchInput) searchInput.addEventListener('input', updateMutamayezDisplay);
            if (stageFilter) stageFilter.addEventListener('change', updateMutamayezDisplay);
            if (classFilter) classFilter.addEventListener('change', updateMutamayezDisplay);

            mutamayezContent.dataset.listenersAttached = 'true';
            console.log('ุงูุชูู ุฅุนุฏุงุฏ ูุณุชูุนู ุงูุฃุญุฏุงุซ ูุฃุฒุฑุงุฑ ุงูุง ูุชููุฒ (ุทุงูุจ).');
        }

        // ุชุญุฏูุซ ุฏุงูุฉ activateTabStudent
        function activateTabStudent(tabName) {
            console.log('ุชูุนูู ุงูุชุจููุจ (ุทุงูุจ):', tabName);
            activeTab = tabName;
            
            // ุฅุฎูุงุก ุฌููุน ูุญุชููุงุช ุงูุชุจููุจุงุช ุฃููุงู
            document.getElementById('nqati-content-student').style.display = 'none';
            document.getElementById('mutamayez-content-student').style.display = 'none';

            // ุฅุฒุงูุฉ ุงููุฆุฉ 'active' ูู ุฌููุน ุงูุชุจููุจุงุช
            document.querySelectorAll('.tabs-container .tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // ุฅุธูุงุฑ ูุญุชูู ุงูุชุจููุจ ุงููุดุท ูุฅุถุงูุฉ ุงููุฆุฉ 'active' ููุชุจููุจ
            const schoolLogo = document.querySelector('.school-logo');

            if (tabName === 'ููุงุทู') {
                document.getElementById('nqati-content-student').style.display = 'block';
                document.querySelector('.tab:nth-child(1)').classList.add('active');
                if (schoolLogo) schoolLogo.style.display = 'block';
                updateDisplay();
            } else if (tabName === 'ุงูุง ูุชููุฒ') {
                document.getElementById('mutamayez-content-student').style.display = 'block';
                document.querySelector('.tab:nth-child(2)').classList.add('active');
                if (schoolLogo) schoolLogo.style.display = 'block'; // ุฅุธูุงุฑ ุดุนุงุฑ ุงููุฏุฑุณุฉ
                setupMutamayezStudentEventListeners();
                updateMutamayezDisplay();
            }
        }

        // ุชุญุฏูุซ ุฃููููุฉ ุงูุฒุฑ ุนูุฏ ุชุญููู ุงูุตูุญุฉ
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);

            // ุชุญุฏูุซ ุฃููููุฉ ุงูุฒุฑ
            const themeIcon = document.querySelector('.theme-toggle i');
            themeIcon.textContent = savedTheme === 'dark' ? 'โ๏ธ' : '๐';
            
            // ุชูุนูู ุงูุชุจููุจ ุงูุงูุชุฑุงุถู (ููุงุทู) ุนูุฏ ุชุญููู ุงูุตูุญุฉ
            activateTabStudent('ููุงุทู');
        });
    </script>

    <script>
    // ุฏุงูุฉ ุชุจุฏูู ุงููุถุน ุงููููู
    function toggleTheme() {
        const body = document.documentElement;
        const currentTheme = body.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        
        body.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        
        // ุชุญุฏูุซ ุฃููููุฉ ุงูุฒุฑ
        const themeIcon = document.querySelector('.theme-toggle i');
        themeIcon.textContent = newTheme === 'dark' ? 'โ๏ธ' : '๐';
    }

    // ุฏุงูุฉ ุชุจุฏูู ูุงุฆูุฉ ุงููุงูุจุฑุบุฑ
    function toggleMenu() {
        const mobileMenu = document.querySelector('.mobile-menu');
        mobileMenu.classList.toggle('active');
    }

    // ุฅุบูุงู ุงููุงุฆูุฉ ุนูุฏ ุงูููุฑ ุฎุงุฑุฌูุง
    document.addEventListener('click', (event) => {
        const mobileMenu = document.querySelector('.mobile-menu');
        const hamburgerBtn = document.querySelector('.hamburger-btn');
        if (!mobileMenu.contains(event.target) && !hamburgerBtn.contains(event.target) && mobileMenu.classList.contains('active')) {
            mobileMenu.classList.remove('active');
        }
    });
    </script>

    <script>
    // ุชุฃูุฏ ูู ูุฌูุฏ showAlert ุฃู ูู ุจุชุนุฑูููุง ููุง ุฅุฐุง ูู ุชูู ููุฌูุฏุฉ
    if (typeof showAlert === 'undefined') {
        function showAlert(message, type = 'info') {
            console.log('ALERT (Student):', type, message);
            // ููููู ุฅุถุงูุฉ ููุทู ุนุฑุถ ุงูุชูุจููุงุช ุงููุฑุฆู ููุง ูุตูุญุฉ ุงูุทุงูุจ
            // ูุซุงู ุจุณูุท:
            // alert(type.toUpperCase() + ': ' + message);
        }
    }
    </script>

    <script>
    // ุฏุงูุฉ ุชุญุฏูุซ ูุงุฆูุฉ ุงููุตูู ูู ุชุจููุจ ุงูุง ูุชููุฒ
    function updateMutamayezClassFilter() {
        const stageFilter = document.getElementById('mutamayez-studentStageFilter');
        const classFilter = document.getElementById('mutamayez-studentClassFilter');
        const selectedStage = stageFilter.value;
        
        // ูุณุญ ุงููุงุฆูุฉ ุงูุญุงููุฉ
        classFilter.innerHTML = '<option value="">ุฌููุน ุงููุตูู</option>';
        
        if (selectedStage && stageClasses[selectedStage]) {
            stageClasses[selectedStage].classes.forEach(className => {
                const option = document.createElement('option');
                option.value = className;
                option.textContent = className;
                classFilter.appendChild(option);
            });
        }
        
        // ุชุญุฏูุซ ุนุฑุถ ุงูุทูุงุจ
        updateMutamayezDisplay();
    }

    // ุชุญุฏูุซ ูุณุชูุน ุงูุญุฏุซ ูููุชุฑ ุงููุฑุญูุฉ ูู ุชุจููุจ ุงูุง ูุชููุฒ
    document.getElementById('mutamayez-studentStageFilter').addEventListener('change', updateMutamayezClassFilter);
    </script>
</body>
</html>